<!DOCTYPE html>
<html lang="ru">
<head>
        <meta charset="utf-8" />
        <title>Создание обучающих данных в GEE для классификации</title>
        <link rel="stylesheet" href="https://kolesovdmitry.github.io/logbook/theme/css/main.css" />
</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <h1><a href="https://kolesovdmitry.github.io/logbook/">Список всего </a></h1>
                <nav><ul>
                    <li class="active"><a href="https://kolesovdmitry.github.io/logbook/category/google-earthengine-tools.html">Google EarthEngine tools</a></li>
                    <li><a href="https://kolesovdmitry.github.io/logbook/category/review.html">Review</a></li>
                </ul></nav>
        </header><!-- /#banner -->
<section id="content" class="body">
  <article>
    <header>
      <h1 class="entry-title">
        <a href="https://kolesovdmitry.github.io/logbook/sozdanie-obuchaiushchikh-dannykh-v-gee-dlia-klassifikatsii.html" rel="bookmark"
           title="Permalink to Создание обучающих данных в GEE для классификации">Создание обучающих данных в GEE для классификации</a></h1>
    </header>

    <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2020-01-10T00:00:00+03:00">
                Published: Пт 10 января 2020
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="https://kolesovdmitry.github.io/logbook/author/dmitry-kolesov.html">Dmitry Kolesov</a>
        </address>
<p>In <a href="https://kolesovdmitry.github.io/logbook/category/google-earthengine-tools.html">Google EarthEngine tools</a>.</p>
<p>tags: <a href="https://kolesovdmitry.github.io/logbook/tag/remote-sensing.html">Remote Sensing</a> <a href="https://kolesovdmitry.github.io/logbook/tag/gee.html">GEE</a> </p>
</footer><!-- /.post-info -->      <p>Периодически возникает необходимость создать обучающее множество примеров на базе данных,
подготовленных к анализу в GEE.</p>
<h1>Попиксельный анализ</h1>
<p>Если планируется попиксельный анализ, то обычно все довольно просто,
нужно подготовить к анализу снимки (<a href="https://kolesovdmitry.github.io/logbook/predobrabotka-dannykh-sentinel-2-v-google-earthengine.html">см., скажем, этот пример</a>),
а затем сгенерировать набор точек и прочитать под этими точками значения яркостей каналов полученных снимков.</p>
<p>Полученную выборку затем можно экспортировать на диск (для попиксельного анализа удобно это делать в формате CSV),
на практике весь прооцесс выглядит  как-то так:</p>
<div class="highlight"><pre><span></span><span class="o">//</span> <span class="k">data</span> <span class="c1">-- интересующий нас растр</span>
<span class="o">//</span> <span class="n">waterPoly</span> <span class="c1">-- полигоны, в которых закодированы классы объектов</span>
<span class="o">//</span> <span class="n">properties</span> <span class="c1">-- список полей, которые интересно сохранить в выборке</span>
<span class="n">var</span> <span class="n">points</span> <span class="o">=</span> <span class="k">data</span><span class="p">.</span><span class="n">sampleRegions</span><span class="p">(</span><span class="err">{</span>
  <span class="n">collection</span><span class="p">:</span> <span class="n">waterPoly</span><span class="p">,</span>
  <span class="n">properties</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;ID&#39;</span><span class="p">,</span><span class="s1">&#39;G1WBM&#39;</span><span class="p">,</span><span class="s1">&#39;VEGTYPE&#39;</span><span class="p">],</span>
  <span class="k">scale</span><span class="p">:</span> <span class="mi">15</span><span class="p">,</span>
  <span class="n">tileScale</span><span class="p">:</span> <span class="mi">1</span>
<span class="err">}</span><span class="p">);</span>

<span class="n">Export</span><span class="p">.</span><span class="k">table</span><span class="p">.</span><span class="n">toDrive</span><span class="p">(</span><span class="err">{</span>
  <span class="n">collection</span><span class="p">:</span> <span class="n">points</span><span class="p">,</span>
  <span class="n">description</span><span class="p">:</span><span class="s1">&#39;Points_sample&#39;</span><span class="p">,</span>
  <span class="n">folder</span><span class="p">:</span> <span class="s1">&#39;EE&#39;</span><span class="p">,</span>
  <span class="n">fileFormat</span><span class="p">:</span> <span class="s1">&#39;CSV&#39;</span>
<span class="err">}</span><span class="p">);</span>
</pre></div>


<p>На выходе получится файл CSV примерно такого вида:</p>
<div class="highlight"><pre><span></span><span class="o">&gt;</span>  <span class="n">head</span> <span class="o">-</span><span class="mi">3</span> <span class="n">Points_sample</span><span class="p">.</span><span class="n">csv</span> <span class="o">|</span> <span class="n">cut</span> <span class="o">-</span><span class="n">d</span><span class="p">,</span> <span class="o">-</span><span class="n">f1</span><span class="o">-</span><span class="mi">6</span>

<span class="k">system</span><span class="p">:</span><span class="k">index</span><span class="p">,</span><span class="n">G1WBM</span><span class="p">,</span><span class="n">ID</span><span class="p">,</span><span class="n">VEGTYPE</span><span class="p">,</span><span class="n">green</span><span class="p">,</span><span class="n">green_1</span>
<span class="mi">00000000000000000024</span><span class="n">_0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">38</span><span class="p">,</span><span class="n">shadow</span><span class="p">,</span><span class="mi">0</span><span class="p">.</span><span class="mi">0599</span><span class="p">,</span><span class="mi">0</span><span class="p">.</span><span class="mi">0732</span>
<span class="mi">00000000000000000024</span><span class="n">_1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">38</span><span class="p">,</span><span class="n">shadow</span><span class="p">,</span><span class="mi">0</span><span class="p">.</span><span class="mi">0599</span><span class="p">,</span><span class="mi">0</span><span class="p">.</span><span class="mi">0748</span>
</pre></div>


<p>где G1WBM, ID, VEGTYPE -- поля исходных полигональных объектов, а green, green_1,... -- яркости пикселей соотвествующих каналов снимка
(в данном примере в снимке было собрано несколько зеленых каналов).</p>
<h1>Пообъектный анализ</h1>
    </div><!-- /.entry-content -->

  </article>
</section>
        <section id="extras" class="body">
        </section><!-- /#extras -->

        <footer id="contentinfo" class="body">
                <address id="about" class="vcard body">
                Proudly powered by <a href="http://getpelican.com/">Pelican</a>, which takes great advantage of <a href="http://python.org">Python</a>.
                </address><!-- /#about -->

                <p>The theme is by <a href="http://coding.smashingmagazine.com/2009/08/04/designing-a-html-5-layout-from-scratch/">Smashing Magazine</a>, thanks!</p>
        </footer><!-- /#contentinfo -->

</body>
</html>